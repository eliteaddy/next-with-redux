{"version":3,"file":"static/webpack/static/development/pages/signin.js.d6b7239d7add43007852.hot-update.js","sources":["webpack:///./node_modules/isomorphic-unfetch/browser.js","webpack:///./redux/actions/authActions.js"],"sourcesContent":["module.exports = window.fetch || (window.fetch = require('unfetch').default || require('unfetch'));\n","// actions/authActions.js\nimport cookie from 'js-cookie';\nimport Router from 'next/router';\nimport fetch from 'isomorphic-unfetch';\nimport { AUTHENTICATE, DEAUTHENTICATE, REGISTER, USERINFO } from '../actionTypes';\n\nexport const authenticate = (user) => (dispatch) =>\n\tfetch(`http://localhost:5000/users/api`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tbody: JSON.stringify(user),\n\t})\n\t\t.then((data) => data.json())\n\t\t.then((response) => {\n\t\t\t// console.log('ok set cookie', response.token);\n\t\t\tsetCookie('token', response.token);\n\t\t\tRouter.push('/dashboard');\n\t\t\tdispatch({ type: AUTHENTICATE, payload: response.token });\n\t\t})\n\t\t.catch((err) => console.log(err));\n\nexport const deauthenticate = () => {\n\treturn (dispatch) => {\n\t\tremoveCookie('token');\n\t\tRouter.push('/');\n\t\tdispatch({ type: DEAUTHENTICATE });\n\t};\n};\n\nexport const register = (user) => (dispatch) => {\n\t// console.log(user);\n\tfetch(`http://localhost:5000/users/api`, {\n\t\tmethod: 'PUT',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tbody: JSON.stringify(user),\n\t})\n\t\t.then((data) => data.json())\n\t\t.then((response) => {\n\t\t\t// console.log('ok set cookie', response.token);\n\t\t\tsetCookie('token', response.token);\n\t\t\tRouter.push('/dashboard');\n\t\t\tdispatch({ type: REGISTER, payload: response.token });\n\t\t})\n\t\t.catch((err) => console.log(err));\n};\n\nexport const getUser = (token) => (dispatch) => {\n\tfetch(`http://localhost:5000/users/api`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\t'x-auth-token': token,\n\t\t},\n\t})\n\t\t.then((res) => res.json())\n\t\t.then((user) => {\n\t\t\tdispatch({ type: USERINFO, payload: user });\n\t\t});\n};\n\n/**\n * cookie helper methods\n */\n\nexport const setCookie = (key, value) => {\n\tif (process.browser) {\n\t\tcookie.set(key, value, {\n\t\t\texpires: 1,\n\t\t\tpath: '/',\n\t\t});\n\t}\n};\n\nexport const removeCookie = (key) => {\n\tif (process.browser) {\n\t\tcookie.remove(key, {\n\t\t\texpires: 1,\n\t\t});\n\t}\n};\n\nexport const getCookie = (key, req) => {\n\treturn process.browser ? getCookieFromBrowser(key) : getCookieFromServer(key, req);\n};\n\nconst getCookieFromBrowser = (key) => {\n\treturn cookie.get(key);\n};\n\nconst getCookieFromServer = (key, req) => {\n\tif (!req.headers.cookie) {\n\t\treturn undefined;\n\t}\n\tconst rawCookie = req.headers.cookie.split(';').find((c) => c.trim().startsWith(`${key}=`));\n\tif (!rawCookie) {\n\t\treturn undefined;\n\t}\n\treturn rawCookie.split('=')[1];\n};\n"],"mappings":";;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAFA;AAIA;AANA;AAQA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAhBA;AAAA;AAkBA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AANA;AAQA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAlBA;AAoBA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAFA;AAQA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAbA;AAeA;;;;AAIA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAEA;AACA;AACA;AACA;AADA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;;;;A","sourceRoot":""}