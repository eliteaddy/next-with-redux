{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport Router from 'next/router';\nimport { setTitle } from '../redux/actions/titleAction';\nimport { getUser, getCookie } from '../redux/actions/authActions';\n\nvar Dashboard =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Dashboard, _Component);\n\n  function Dashboard() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Dashboard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Dashboard)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      user: _this.props.user,\n      loading: true\n    });\n\n    return _this;\n  }\n\n  _createClass(Dashboard, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get(\"http://localhost:5000/users/api\", {\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n          'x-auth-token': this.props.token\n        }\n      }).then(function (res) {\n        // console.log(res.data);\n        _this2.setState({\n          user: res.data,\n          loading: false\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.loading) {\n        return __jsx(\"div\", null, \"Loading...\");\n      }\n\n      return __jsx(\"div\", {\n        style: {\n          textAlign: 'center'\n        }\n      }, __jsx(\"h2\", null, \"Dashboard\"), __jsx(\"div\", {\n        style: {\n          textAlign: 'left'\n        }\n      }, __jsx(\"h4\", null, \"Name : \", this.state.user.name), __jsx(\"h4\", null, \"Email : \", this.state.user.email), __jsx(\"h4\", null, \"Date Created : \", new Date(this.state.user.date).toLocaleDateString()), __jsx(\"h4\", null, \"Time Created : \", new Date(this.state.user.date).toLocaleTimeString())));\n    }\n  }]);\n\n  return Dashboard;\n}(Component);\n\nDashboard.getInitialProps =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(_ref) {\n    var store, res, req, isServer, token, user;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            store = _ref.store, res = _ref.res, req = _ref.req, isServer = _ref.isServer;\n            token = getCookie('token', req);\n            store.dispatch(setTitle('Dashboard')); // console.log(isServer, token);\n\n            if (!token) {\n              {\n                isServer ? res.redirect('/signin') : Router.push('/signin');\n              }\n            }\n\n            if (!token) {\n              _context.next = 8;\n              break;\n            }\n\n            store.dispatch(getUser(token));\n            user = store.getState().authentication.user;\n            return _context.abrupt(\"return\", {\n              user: user,\n              token: token\n            });\n\n          case 8:\n            return _context.abrupt(\"return\", {});\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport default connect(function (state) {\n  return state;\n}, {\n  setTitle: setTitle,\n  getUser: getUser\n})(Dashboard);","map":{"version":3,"sources":["/home/haryormeedey/Documents/React-Apps/withredux/frontend/pages/dashboard.js"],"names":["React","Component","axios","connect","Router","setTitle","getUser","getCookie","Dashboard","user","props","loading","get","headers","Accept","token","then","res","setState","data","state","textAlign","name","email","Date","date","toLocaleDateString","toLocaleTimeString","getInitialProps","store","req","isServer","dispatch","redirect","push","getState","authentication"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,SAASC,QAAT,QAAyB,8BAAzB;AACA,SAASC,OAAT,EAAkBC,SAAlB,QAAmC,8BAAnC;;IAEMC,S;;;;;;;;;;;;;;;;;;4DACG;AACPC,MAAAA,IAAI,EAAE,MAAKC,KAAL,CAAWD,IADV;AAEPE,MAAAA,OAAO,EAAE;AAFF,K;;;;;;;wCAKY;AAAA;;AACnBT,MAAAA,KAAK,CACHU,GADF,oCACyC;AACvCC,QAAAA,OAAO,EAAE;AACRC,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB,kBAFR;AAGR,0BAAgB,KAAKJ,KAAL,CAAWK;AAHnB;AAD8B,OADzC,EAQEC,IARF,CAQO,UAACC,GAAD,EAAS;AACd;AACA,QAAA,MAAI,CAACC,QAAL,CAAc;AAAET,UAAAA,IAAI,EAAEQ,GAAG,CAACE,IAAZ;AAAkBR,UAAAA,OAAO,EAAE;AAA3B,SAAd;AACA,OAXF;AAYA;;;6BAEQ;AACR,UAAI,KAAKS,KAAL,CAAWT,OAAf,EAAwB;AACvB,eAAO,gCAAP;AACA;;AACD,aACC;AAAK,QAAA,KAAK,EAAE;AAAEU,UAAAA,SAAS,EAAE;AAAb;AAAZ,SACC,8BADD,EAEC;AAAK,QAAA,KAAK,EAAE;AAAEA,UAAAA,SAAS,EAAE;AAAb;AAAZ,SACC,6BAAY,KAAKD,KAAL,CAAWX,IAAX,CAAgBa,IAA5B,CADD,EAEC,8BAAa,KAAKF,KAAL,CAAWX,IAAX,CAAgBc,KAA7B,CAFD,EAGC,qCAAoB,IAAIC,IAAJ,CAAS,KAAKJ,KAAL,CAAWX,IAAX,CAAgBgB,IAAzB,EAA+BC,kBAA/B,EAApB,CAHD,EAIC,qCAAoB,IAAIF,IAAJ,CAAS,KAAKJ,KAAL,CAAWX,IAAX,CAAgBgB,IAAzB,EAA+BE,kBAA/B,EAApB,CAJD,CAFD,CADD;AAWA;;;;EApCsB1B,S;;AAuCxBO,SAAS,CAACoB,eAAV;AAAA;AAAA;AAAA;AAAA;AAAA,2BAA4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAASC,YAAAA,KAAT,QAASA,KAAT,EAAgBZ,GAAhB,QAAgBA,GAAhB,EAAqBa,GAArB,QAAqBA,GAArB,EAA0BC,QAA1B,QAA0BA,QAA1B;AACrBhB,YAAAA,KADqB,GACbR,SAAS,CAAC,OAAD,EAAUuB,GAAV,CADI;AAE3BD,YAAAA,KAAK,CAACG,QAAN,CAAe3B,QAAQ,CAAC,WAAD,CAAvB,EAF2B,CAG3B;;AACA,gBAAI,CAACU,KAAL,EAAY;AACX;AACCgB,gBAAAA,QAAQ,GAAGd,GAAG,CAACgB,QAAJ,CAAa,SAAb,CAAH,GAA6B7B,MAAM,CAAC8B,IAAP,CAAY,SAAZ,CAArC;AACA;AACD;;AAR0B,iBASvBnB,KATuB;AAAA;AAAA;AAAA;;AAU1Bc,YAAAA,KAAK,CAACG,QAAN,CAAe1B,OAAO,CAACS,KAAD,CAAtB;AACMN,YAAAA,IAXoB,GAWboB,KAAK,CAACM,QAAN,GAAiBC,cAAjB,CAAgC3B,IAXnB;AAAA,6CAYnB;AAAEA,cAAAA,IAAI,EAAJA,IAAF;AAAQM,cAAAA,KAAK,EAALA;AAAR,aAZmB;;AAAA;AAAA,6CAcpB,EAdoB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA5B;;AAAA;AAAA;AAAA;AAAA;;AAiBA,eAAeZ,OAAO,CAAC,UAACiB,KAAD;AAAA,SAAWA,KAAX;AAAA,CAAD,EAAmB;AAAEf,EAAAA,QAAQ,EAARA,QAAF;AAAYC,EAAAA,OAAO,EAAPA;AAAZ,CAAnB,CAAP,CAAiDE,SAAjD,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nimport { connect } from 'react-redux';\nimport Router from 'next/router';\nimport { setTitle } from '../redux/actions/titleAction';\nimport { getUser, getCookie } from '../redux/actions/authActions';\n\nclass Dashboard extends Component {\n\tstate = {\n\t\tuser: this.props.user,\n\t\tloading: true,\n\t};\n\n\tcomponentDidMount() {\n\t\taxios\n\t\t\t.get(`http://localhost:5000/users/api`, {\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'x-auth-token': this.props.token,\n\t\t\t\t},\n\t\t\t})\n\t\t\t.then((res) => {\n\t\t\t\t// console.log(res.data);\n\t\t\t\tthis.setState({ user: res.data, loading: false });\n\t\t\t});\n\t}\n\n\trender() {\n\t\tif (this.state.loading) {\n\t\t\treturn <div>Loading...</div>;\n\t\t}\n\t\treturn (\n\t\t\t<div style={{ textAlign: 'center' }}>\n\t\t\t\t<h2>Dashboard</h2>\n\t\t\t\t<div style={{ textAlign: 'left' }}>\n\t\t\t\t\t<h4>Name : {this.state.user.name}</h4>\n\t\t\t\t\t<h4>Email : {this.state.user.email}</h4>\n\t\t\t\t\t<h4>Date Created : {new Date(this.state.user.date).toLocaleDateString()}</h4>\n\t\t\t\t\t<h4>Time Created : {new Date(this.state.user.date).toLocaleTimeString()}</h4>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nDashboard.getInitialProps = async ({ store, res, req, isServer }) => {\n\tconst token = getCookie('token', req);\n\tstore.dispatch(setTitle('Dashboard'));\n\t// console.log(isServer, token);\n\tif (!token) {\n\t\t{\n\t\t\tisServer ? res.redirect('/signin') : Router.push('/signin');\n\t\t}\n\t}\n\tif (token) {\n\t\tstore.dispatch(getUser(token));\n\t\tconst user = store.getState().authentication.user;\n\t\treturn { user, token };\n\t}\n\treturn {};\n};\n\nexport default connect((state) => state, { setTitle, getUser })(Dashboard);\n"]},"metadata":{},"sourceType":"module"}