{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { makeStore } from '../redux';\nimport { Provider } from 'react-redux';\nimport { getCookie } from '../redux/actions/authActions'; // import App, { Container } from 'next/app';\n\nimport axios from 'axios';\nimport withRedux from 'next-redux-wrapper';\nimport Head from '../components/head';\nimport Layout from '../components/Layout';\n\nvar MyApp = function MyApp(_ref) {\n  var Component = _ref.Component,\n      pageProps = _ref.pageProps,\n      store = _ref.store;\n  return __jsx(Provider, {\n    store: store\n  }, __jsx(Layout, null, __jsx(Head, null), __jsx(Component, pageProps)));\n};\n\nMyApp.getInitialProps =\n/*#__PURE__*/\nfunction () {\n  var _ref3 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(_ref2) {\n    var Component, ctx, token, pageProps;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            Component = _ref2.Component, ctx = _ref2.ctx;\n            // we can dispatch from here too\n            ctx.store.dispatch({\n              type: 'API',\n              payload: 'api'\n            });\n            token = getCookie('token', ctx.req);\n            axios.get(\"http://localhost:5000/users/api\", {\n              headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n                'x-auth-token': token\n              }\n            }).then(function (res) {\n              // console.log(res.data);\n              ctx.store.dispatch({\n                type: 'AUTHENTICATE',\n                payload: token\n              });\n              ctx.store.dispatch({\n                type: 'USERINFO',\n                payload: res.data\n              });\n            });\n\n            if (!Component.getInitialProps) {\n              _context.next = 10;\n              break;\n            }\n\n            _context.next = 7;\n            return Component.getInitialProps(ctx);\n\n          case 7:\n            _context.t0 = _context.sent;\n            _context.next = 11;\n            break;\n\n          case 10:\n            _context.t0 = {};\n\n          case 11:\n            pageProps = _context.t0;\n            return _context.abrupt(\"return\", {\n              pageProps: pageProps\n            });\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nexport default withRedux(makeStore)(MyApp);","map":{"version":3,"sources":["/home/haryormeedey/Documents/React-Apps/withredux/frontend/pages/_app.js"],"names":["React","makeStore","Provider","getCookie","axios","withRedux","Head","Layout","MyApp","Component","pageProps","store","getInitialProps","ctx","dispatch","type","payload","token","req","get","headers","Accept","then","res","data"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,UAA1B;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,SAAT,QAA0B,8BAA1B,C,CACA;;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,oBAAtB;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;;AAEA,IAAMC,KAAK,GAAG,SAARA,KAAQ,OAAqC;AAAA,MAAlCC,SAAkC,QAAlCA,SAAkC;AAAA,MAAvBC,SAAuB,QAAvBA,SAAuB;AAAA,MAAZC,KAAY,QAAZA,KAAY;AAClD,SACC,MAAC,QAAD;AAAU,IAAA,KAAK,EAAEA;AAAjB,KACC,MAAC,MAAD,QACC,MAAC,IAAD,OADD,EAEC,MAAC,SAAD,EAAeD,SAAf,CAFD,CADD,CADD;AAQA,CATD;;AAWAF,KAAK,CAACI,eAAN;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAASH,YAAAA,SAAT,SAASA,SAAT,EAAoBI,GAApB,SAAoBA,GAApB;AACvB;AACAA,YAAAA,GAAG,CAACF,KAAJ,CAAUG,QAAV,CAAmB;AAAEC,cAAAA,IAAI,EAAE,KAAR;AAAeC,cAAAA,OAAO,EAAE;AAAxB,aAAnB;AACMC,YAAAA,KAHiB,GAGTd,SAAS,CAAC,OAAD,EAAUU,GAAG,CAACK,GAAd,CAHA;AAIvBd,YAAAA,KAAK,CACHe,GADF,oCACyC;AACvCC,cAAAA,OAAO,EAAE;AACRC,gBAAAA,MAAM,EAAE,kBADA;AAER,gCAAgB,kBAFR;AAGR,gCAAgBJ;AAHR;AAD8B,aADzC,EAQEK,IARF,CAQO,UAACC,GAAD,EAAS;AACd;AACAV,cAAAA,GAAG,CAACF,KAAJ,CAAUG,QAAV,CAAmB;AAAEC,gBAAAA,IAAI,EAAE,cAAR;AAAwBC,gBAAAA,OAAO,EAAEC;AAAjC,eAAnB;AACAJ,cAAAA,GAAG,CAACF,KAAJ,CAAUG,QAAV,CAAmB;AAAEC,gBAAAA,IAAI,EAAE,UAAR;AAAoBC,gBAAAA,OAAO,EAAEO,GAAG,CAACC;AAAjC,eAAnB;AACA,aAZF;;AAJuB,iBAiBLf,SAAS,CAACG,eAjBL;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAiB6BH,SAAS,CAACG,eAAV,CAA0BC,GAA1B,CAjB7B;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,0BAiB8D,EAjB9D;;AAAA;AAiBjBH,YAAAA,SAjBiB;AAAA,6CAkBhB;AAAEA,cAAAA,SAAS,EAATA;AAAF,aAlBgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAxB;;AAAA;AAAA;AAAA;AAAA;;AAqBA,eAAeL,SAAS,CAACJ,SAAD,CAAT,CAAqBO,KAArB,CAAf","sourcesContent":["import React from 'react';\nimport { makeStore } from '../redux';\nimport { Provider } from 'react-redux';\nimport { getCookie } from '../redux/actions/authActions';\n// import App, { Container } from 'next/app';\nimport axios from 'axios';\nimport withRedux from 'next-redux-wrapper';\nimport Head from '../components/head';\nimport Layout from '../components/Layout';\n\nconst MyApp = ({ Component, pageProps, store }) => {\n\treturn (\n\t\t<Provider store={store}>\n\t\t\t<Layout>\n\t\t\t\t<Head />\n\t\t\t\t<Component {...pageProps} />\n\t\t\t</Layout>\n\t\t</Provider>\n\t);\n};\n\nMyApp.getInitialProps = async ({ Component, ctx }) => {\n\t// we can dispatch from here too\n\tctx.store.dispatch({ type: 'API', payload: 'api' });\n\tconst token = getCookie('token', ctx.req);\n\taxios\n\t\t.get(`http://localhost:5000/users/api`, {\n\t\t\theaders: {\n\t\t\t\tAccept: 'application/json',\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'x-auth-token': token,\n\t\t\t},\n\t\t})\n\t\t.then((res) => {\n\t\t\t// console.log(res.data);\n\t\t\tctx.store.dispatch({ type: 'AUTHENTICATE', payload: token });\n\t\t\tctx.store.dispatch({ type: 'USERINFO', payload: res.data });\n\t\t});\n\tconst pageProps = Component.getInitialProps ? await Component.getInitialProps(ctx) : {};\n\treturn { pageProps };\n};\n\nexport default withRedux(makeStore)(MyApp);\n"]},"metadata":{},"sourceType":"module"}